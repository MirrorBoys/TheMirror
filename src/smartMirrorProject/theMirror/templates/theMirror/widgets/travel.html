{% if data %}
    {% if data.0.error %}
        <p>{{ data.0.error }}</p>
    {% else %}
        <style>
            .travel-widget {
                max-height: 200px; /* Adjust the height based on your layout */
                overflow-y: auto;  /* Allow vertical scrolling */
                font-size: 12px;   /* Smaller text for more content */
                display: flex;
                flex-direction: column;  /* Ensure header and table are stacked vertically */
            }

            h3 {
                text-align: center;
                margin-bottom: 2px;  /* Reduce space between header and table */
            }

            .station-info {
                text-align: center;
                font-size: 10px;   /* Smaller font for station info */
                color: #555;      /* Slightly darker text color */
                margin-bottom: 2px; /* Space between station info and table */
            }

            table {
                border-collapse: collapse;
                width: 100%;
                margin: 20px 0;
                font-family: Arial, sans-serif;
            }

            th, td {
                border: 1px solid #ddd;
                padding: 8px;
                text-align: left;
            }

            th {
                background-color: #f4f4f4;
                font-weight: bold;
            }

            tr:nth-child(even) {
                background-color: #f9f9f9; /* Alternating row color */
            }

            tr:hover {
                background-color: #f1f1f1; /* Row hover effect */
            }
        </style>

        <div class="travel-widget">
            <!-- Header Above the Table -->
            <h3>Travel Information</h3>
            
            <!-- Display First and Last Station Info -->
            <div class="station-info">
                {{ data.0.first_station }} - {{ data.0.last_station }}
            </div>

            <table>
                <thead>
                    <tr>
                        <th>Station</th>
                        <th>Planned Time</th>
                        <th>Actual Time</th>
                        <th>Delay</th>
                    </tr>
                </thead>
                <tbody>
                    {% for trip in data %}
                        <tr>
                            <td>{{ trip.station }}</td>
                            {% if trip.is_final_station %}
                                <!-- Final station: show arrival times -->
                                <td>{{ trip.planned_arrival|default:"N/A" }}</td>
                                <td>{{ trip.actual_arrival|default:"N/A" }}</td>
                            {% else %}
                                <!-- Regular stations: show departure times -->
                                <td>{{ trip.planned_departure|default:"N/A" }}</td>
                                <td>{{ trip.actual_departure|default:"N/A" }}</td>
                            {% endif %}
                            <td>{{ trip.delay }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>   
    {% endif %}
{% else %}
    <p>No travel data available.</p>
{% endif %}
